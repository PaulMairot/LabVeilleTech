<!doctype html><html lang=fr-ch data-theme>
<head>
<meta charset=utf-8>
<meta name=HandheldFriendly content="True">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=referrer content="no-referrer-when-downgrade">
<title>Expérimentation : ElectronJS - LabVeilleTech - Paul</title>
<meta name=description content="Test de ElectronJS">
<link rel=icon type=image/x-icon href=https://paulmairot.github.io/LabVeilleTech/favicon.ico>
<link rel=apple-touch-icon-precomposed href=https://paulmairot.github.io/LabVeilleTech/favicon.png>
<style>body{visibility:hidden;opacity:0}</style>
<noscript>
<style>body{visibility:visible;opacity:1}</style>
</noscript>
<link rel=stylesheet href=https://paulmairot.github.io/LabVeilleTech/css/style.min.aac3b3a2a3235d20a652d9ccde7ec59be09f74c45de387513f681d02f3912b95.css integrity="sha256-qsOzoqMjXSCmUtnM3n7Fm+CfdMRd44dRP2gdAvORK5U=">
<script src=https://paulmairot.github.io/LabVeilleTech/js/script.min.510c781c39dbb21b4c76d85c82e2bdf4689220adbb7cd61e49e9d293e442fb42.js type=text/javascript integrity="sha256-UQx4HDnbshtMdthcguK99GiSIK27fNYeSenSk+RC+0I="></script>
<meta property="og:title" content="Expérimentation : ElectronJS">
<meta property="og:description" content="Test de ElectronJS">
<meta property="og:type" content="article">
<meta property="og:url" content="https://paulmairot.github.io/LabVeilleTech/post/electron/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2023-01-13T00:00:00+00:00">
<meta property="article:modified_time" content="2023-01-13T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Expérimentation : ElectronJS">
<meta name=twitter:description content="Test de ElectronJS">
</head>
<body>
<a class=skip-main href=#main>Skip to main content</a>
<div class=container>
<header class=common-header>
<div class=header-top>
<h1 class=site-title>
<a href=/LabVeilleTech>LabVeilleTech - Paul</a>
</h1>
<ul class=social-icons>
</ul>
</div>
<nav>
<a href=https://paulmairot.github.io/LabVeilleTech/posts/ title>Posts</a>
<a href=https://paulmairot.github.io/LabVeilleTech/tags/ title>Tags</a>
<a href=https://paulmairot.github.io/LabVeilleTech/about/ title>About</a>
</nav>
</header>
<main id=main tabindex=-1>
<article class="post h-entry">
<div class=post-header>
<header>
<h1 class="p-name post-title">Expérimentation : ElectronJS</h1>
</header>
</div>
<div class="content e-content">
<p>Test de ElectronJS, un cadre open-source qui permet de créer des applications de bureau multiplateformes en utilisant JavaScript, HTML et CSS. Il est basé sur le moteur Chromium de Google et Node.js, et permet aux développeurs de construire des applications qui fonctionnent sur Windows, Mac et Linux en utilisant une seule base de code. Il est utilisé pour créer des applications de bureau telles que Visual Studio Code, Slack et Discord.</p>
<p><a href=https://www.electronjs.org/docs/latest/>Lien vers la documentation</a></p>
<h2 id=comment-linstaller->Comment l&rsquo;installer ?
<span>
<a href=#comment-linstaller-><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
</a>
</span>
</h2><p>ElectronJS peut s&rsquo;installer simplmenent sur n&rsquo;importe quel projets utilisant NodeJS.</p>
<pre tabindex=0><code>npm install --save-dev electron
</code></pre><h2 id=utilisation>Utilisation
<span>
<a href=#utilisation><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
</a>
</span>
</h2><p>Pour cette expérimentation, j&rsquo;ai créé une simple application TO-DO avec une fonctionalité d&rsquo;ajout à la liste. Une fois cette application fait, il n&rsquo;y a qu&rsquo;à ajouté le package electron et l&rsquo;ajouter au script de démarrage :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
    <span style=color:#f92672>&#34;start&#34;</span> : <span style=color:#e6db74>&#34;electron .&#34;</span>,
    <span style=color:#f92672>&#34;test&#34;</span>: <span style=color:#e6db74>&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>
}
</code></pre></div><p>Nous devons ensuite configurer le fichier <code>main.js</code> du projet afin de définir les options basiques d&rsquo;Electron, comme par exemple la taille de la fenêtre ou le fichier à load lors du démarrage de l&rsquo;application.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>app</span>, <span style=color:#a6e22e>BrowserWindow</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;electron&#34;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;path&#34;</span>);

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>loadMainWindow</span> <span style=color:#f92672>=</span> () =&gt; {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>mainWindow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BrowserWindow</span>({
        <span style=color:#a6e22e>width</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>1200</span>,
        <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>800</span>,
        <span style=color:#a6e22e>webPreferences</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>nodeIntegration</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
        }
    });

    <span style=color:#a6e22e>mainWindow</span>.<span style=color:#a6e22e>loadFile</span>(<span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#34;index.html&#34;</span>));
}

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#34;ready&#34;</span>, <span style=color:#a6e22e>loadMainWindow</span>);

<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#34;window-all-closed&#34;</span>, () =&gt; {
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>platform</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#34;darwin&#34;</span>) {
      <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>quit</span>();
    }
});
</code></pre></div><h3 id=notifications>Notifications
<span>
<a href=#notifications><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
</a>
</span>
</h3><p>Comme dit précedemment, Electron permet d&rsquo;utiliser des fonctionnalités propres aux applications desktop. J&rsquo;ai alors décidé d&rsquo;implémenter un système de notifications à la TODO-list lors de l&rsquo;ajout de tâche.</p>
<p>Pour cela rien de plus simple. Il faut commencer par prévoir les notifications dans <code>main.js</code> en ajoutant les lignes suivants :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>Notification</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;electron&#34;</span>);


<span style=color:#a6e22e>ipcMain</span>.<span style=color:#a6e22e>handle</span>(<span style=color:#e6db74>&#39;show-notification&#39;</span>, (<span style=color:#a6e22e>event</span>, ...<span style=color:#a6e22e>args</span>) =&gt; {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>notification</span> <span style=color:#f92672>=</span> {
        <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;New Task&#39;</span>,
        <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`Added: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>args</span>[<span style=color:#ae81ff>0</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
    }

    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Notification</span>(<span style=color:#a6e22e>notification</span>).<span style=color:#a6e22e>show</span>()
});
</code></pre></div><p>Il faut ensuite créer la notification lors de l&rsquo;ajout d&rsquo;une tâche. Notre <code>script.js</code> gérant l&rsquo;ajout de tâche ressemblera donc à ceci :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>ipcRenderer</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;electron&#39;</span>);

<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>list</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;list&#34;</span>);
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newTask</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;newTask&#34;</span>);

document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;addTask&#34;</span>).<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;click&#39;</span>, () =&gt; {
    <span style=color:#a6e22e>list</span>.<span style=color:#a6e22e>insertAdjacentHTML</span>(<span style=color:#e6db74>&#39;beforeend&#39;</span>, <span style=color:#e6db74>`&lt;li class=&#34;list-group-item&#34;&gt;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>newTask</span>.<span style=color:#a6e22e>value</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&lt;/li&gt;`</span>)
    <span style=color:#a6e22e>ipcRenderer</span>.<span style=color:#a6e22e>invoke</span>(<span style=color:#e6db74>&#39;show-notification&#39;</span>, <span style=color:#a6e22e>newTask</span>.<span style=color:#a6e22e>value</span>);
    <span style=color:#a6e22e>newTask</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
});
</code></pre></div><h4 id=résultat>Résultat
<span>
<a href=#r%c3%a9sultat><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
</a>
</span>
</h4><p><img src=../ElectronNotification.png alt="Notification Electron"></p>
<h2 id=ce-que-jai-retenu>Ce que j&rsquo;ai retenu
<span>
<a href=#ce-que-jai-retenu><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
</a>
</span>
</h2><p>J&rsquo;avais déjà pu utiliser Electron pour des projets personels et professionels. Dans le domaine professionel, ce package m&rsquo;a permis de fournir une application à des clients afin de leur simplifier l&rsquo;utilisation de l&rsquo;application développée.</p>
<p>Electron est très complet et propose de nombreuses fonctionalité d&rsquo;application desktop (ex.: Les notifications), je pense donc pouvoir le réutiliser dans mon avenir professionnel.</p>
</div>
<div class=post-info>
<div class="post-date dt-published">2023-01-13</div>
<a class="post-hidden-url u-url" href=https://paulmairot.github.io/LabVeilleTech/post/electron/>https://paulmairot.github.io/LabVeilleTech/post/electron/</a>
<a href=https://paulmairot.github.io/LabVeilleTech class="p-name p-author post-hidden-author h-card" rel=me>Paul Mairot</a>
<div class=post-taxonomies>
<ul class=post-tags>
<li><a href=https://paulmairot.github.io/LabVeilleTech/tags/experimentation/>#experimentation</a></li>
<li><a href=https://paulmairot.github.io/LabVeilleTech/tags/js/>#js</a></li>
</ul>
</div>
</div>
</article>
</main>
<footer class=common-footer>
<div class=common-footer-bottom>
<div class=copyright>
<p>© 2023<br>
Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br>
</p>
</div>
<script>const STORAGE_KEY='user-color-scheme',defaultTheme="light-without-switcher";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia('(prefers-color-scheme: dark)');const autoChangeScheme=a=>{currentTheme=a.matches?'dark':'light',document.documentElement.setAttribute('data-theme',currentTheme),changeButtonText()};document.addEventListener('DOMContentLoaded',function(){switchButton=document.querySelector('.theme-switcher'),currentTheme=detectCurrentScheme(),currentTheme=='dark'&&document.documentElement.setAttribute('data-theme','dark'),currentTheme=='auto'&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),switchButton&&(changeButtonText(),switchButton.addEventListener('click',switchTheme,!1)),showContent()});function detectCurrentScheme(){return localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light':'light'}function changeButtonText(){switchButton&&(switchButton.textContent=currentTheme=='dark'?"Light theme":"Dark theme")}function switchTheme(a){currentTheme=='dark'?(localStorage.setItem(STORAGE_KEY,'light'),document.documentElement.setAttribute('data-theme','light'),currentTheme='light'):(localStorage.setItem(STORAGE_KEY,'dark'),document.documentElement.setAttribute('data-theme','dark'),currentTheme='dark'),changeButtonText()}function showContent(){document.body.style.visibility='visible',document.body.style.opacity=1}</script>
</div>
<p class="h-card vcard">
<a href=https://paulmairot.github.io/LabVeilleTech class="p-name u-url url fn" rel=me></a>
</p>
</footer>
</div>
</body>
</html>